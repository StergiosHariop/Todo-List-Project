(()=>{"use strict";class e{constructor(e){this.name=e,this.id=Date.now().toString(),this.tasks=[]}}class t{constructor(e,t=!1){this.name=e,this.id=Date.now().toString(),this.complete=t}}(()=>{const a=document.querySelector("[data-list]"),n=document.querySelector("[data-new-container-form]"),s=document.querySelector("[data-new-container-input]"),d=document.querySelector("[data-delete-button]"),c=document.querySelector("[data-clear]"),l=document.querySelector("[data-tasks]"),o=document.querySelector("[data-new-task-form]"),r=document.querySelector("[data-new-task-input]"),i="task.projects",u="task.projectsSelectedId";let m=JSON.parse(localStorage.getItem(i))||[],p=localStorage.getItem(u);function h(){localStorage.setItem(i,JSON.stringify(m)),localStorage.setItem(u,p),f()}function f(){k(a),m.forEach((e=>{const t=document.createElement("li");t.dataset.projectId=e.id,t.classList.add("list-name"),t.innerHTML=e.name,e.id===p&&t.classList.add("active-project"),a.appendChild(t)}));const e=m.find((e=>e.id===p));k(l),function(e){void 0!==e&&e.tasks.forEach((t=>{const a=document.createElement("div");a.classList.add("task");const n=document.createElement("label");n.classList.add("task-label"),n.htmlFor=t.id,n.append(t.name);const s=document.createElement("input");s.setAttribute("type","checkbox"),s.id=t.id,s.checked=t.complete;const d=document.createElement("button");d.classList.add("btn-task-remove"),d.innerText="x",d.addEventListener("click",(()=>{e.tasks.splice(e.tasks.indexOf(t),1),h()})),a.addEventListener("change",(()=>{t.complete=!t.complete,!0===t.complete&&alert(t.name+" done!"),h()})),l.appendChild(a),a.appendChild(s),a.appendChild(n),a.appendChild(d)}))}(e)}function k(e){for(;e.firstChild;)e.removeChild(e.firstChild)}a.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(p=e.target.dataset.projectId,h())})),c.addEventListener("click",(()=>{localStorage.clear(),m=[],h()})),n.addEventListener("submit",(t=>{t.preventDefault();const a=s.value;if(null!==a&&""!==a){s.style.border="1px solid black";const t=new e(a);s.value=null,m.push(t),h()}else s.style.border="1px solid red"})),d.addEventListener("click",(()=>{m=m.filter((e=>e.id!==p)),p=null,h()})),o.addEventListener("submit",(e=>{e.preventDefault();const a=r.value;if(""!==a&&null!==a){r.style.border="1px solid black";const e=new t(a);r.value=null;const n=m.find((e=>e.id===p));if(""!==a&&void 0===n)return;n.tasks.push(e),h()}else r.style.border="1px solid red"})),f()})()})();